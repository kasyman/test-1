function indexAnima(){var n,e,t,a,i,o,r;a=document.getElementById("city"),canvasCity1=document.getElementById("city1"),r=document.body.clientWidth,a.width=canvasCity1.width=r,a.height=canvasCity1.height=r,i=a.getContext("2d"),o=canvasCity1.getContext("2d"),n=new Image,n.onload=function(){e=new Image,e.onload=function(){t=new Image,t.onload=function(){function r(n,e){var t=document.createElement("canvas");t.width=a.width,t.height=a.height;var i=t.getContext("2d");i.translate(t.width/2,t.height/2),i.rotate(e*Math.PI/180),i.translate(t.width/-2,t.height/-2),i.drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height);var o=i.getImageData(0,0,t.width,t.height);return i.clearRect(0,0,t.width,t.height),o}function s(){if(g.hasClass("current")){if(i.globalCompositeOperation="source-over",d++,-30>=u?(h=!0,d=0):u>=30&&(h=!1,d=0),h){u++;var s=Tween.Sine.easeOut(d,u,30-u,f)}else{u--;var s=Tween.Sine.easeOut(d,u,30+u,f)}console.log(h+"--"+s);var l=r(e,s);if(i.putImageData(l,0,0),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,n.width,n.height,0,0,a.width,a.height),o.globalCompositeOperation="source-over",m++,30==c?(h=!0,m=0):-30==c&&(h=!1,m=0),h){c--;var p=Tween.Sine.easeOut(m,c,30+c,f)}else{c++;var p=Tween.Sine.easeOut(m,c,30-c,f)}var l=r(t,p);o.putImageData(l,0,0),o.globalCompositeOperation="source-in",o.drawImage(n,0,0,n.width,n.height,0,0,canvasCity1.width,canvasCity1.height)}}var u=-30,c=30,g=$(".index"),h=!0,d=0,m=0,f=100;setInterval(s,20)},t.src="../img/mask_inner.png"},e.src="../img/mask_out.png"},n.src="../img/city.jpg"}function initPage(){function n(){o=-1==o?2:o,o=3==o?0:o,t.find(".model-wrap").eq(o).addClass("show").siblings().removeClass("show"),t.find(".model-wrap").removeClass("show-con")}var e=new mo.PageSlide({target:$("#slide li")});e.on("change",function(){$("#slide li").eq(this.curPage).addClass("anima").siblings().removeClass("anima")}),$(".view .btn").bind("touchstart",function(){e.next()}),$(".index").addClass("anima"),setTimeout(function(){indexAnima()},800);var t=$(".model-show-page"),a=t.find(".car_arrow_left"),i=t.find(".car_arrow_right"),o=0;a.bind("touchstart",function(){o--,n()}),i.bind("touchstart",function(){o++,n()}),t.find(".add-icon").bind("touchstart",function(){$(this).parent().hasClass("show-con")?$(this).parent().removeClass("show-con"):$(this).parent().addClass("show-con").siblings().removeClass("show-con")})}var Tween={Linear:function(n,e,t,a){return t*n/a+e},Quad:{easeIn:function(n,e,t,a){return t*(n/=a)*n+e},easeOut:function(n,e,t,a){return-t*(n/=a)*(n-2)+e},easeInOut:function(n,e,t,a){return(n/=a/2)<1?t/2*n*n+e:-t/2*(--n*(n-2)-1)+e}},Cubic:{easeIn:function(n,e,t,a){return t*(n/=a)*n*n+e},easeOut:function(n,e,t,a){return t*((n=n/a-1)*n*n+1)+e},easeInOut:function(n,e,t,a){return(n/=a/2)<1?t/2*n*n*n+e:t/2*((n-=2)*n*n+2)+e}},Quart:{easeIn:function(n,e,t,a){return t*(n/=a)*n*n*n+e},easeOut:function(n,e,t,a){return-t*((n=n/a-1)*n*n*n-1)+e},easeInOut:function(n,e,t,a){return(n/=a/2)<1?t/2*n*n*n*n+e:-t/2*((n-=2)*n*n*n-2)+e}},Quint:{easeIn:function(n,e,t,a){return t*(n/=a)*n*n*n*n+e},easeOut:function(n,e,t,a){return t*((n=n/a-1)*n*n*n*n+1)+e},easeInOut:function(n,e,t,a){return(n/=a/2)<1?t/2*n*n*n*n*n+e:t/2*((n-=2)*n*n*n*n+2)+e}},Sine:{easeIn:function(n,e,t,a){return-t*Math.cos(n/a*(Math.PI/2))+t+e},easeOut:function(n,e,t,a){return t*Math.sin(n/a*(Math.PI/2))+e},easeInOut:function(n,e,t,a){return-t/2*(Math.cos(Math.PI*n/a)-1)+e}},Expo:{easeIn:function(n,e,t,a){return 0==n?e:t*Math.pow(2,10*(n/a-1))+e},easeOut:function(n,e,t,a){return n==a?e+t:t*(-Math.pow(2,-10*n/a)+1)+e},easeInOut:function(n,e,t,a){return 0==n?e:n==a?e+t:(n/=a/2)<1?t/2*Math.pow(2,10*(n-1))+e:t/2*(-Math.pow(2,-10*--n)+2)+e}},Circ:{easeIn:function(n,e,t,a){return-t*(Math.sqrt(1-(n/=a)*n)-1)+e},easeOut:function(n,e,t,a){return t*Math.sqrt(1-(n=n/a-1)*n)+e},easeInOut:function(n,e,t,a){return(n/=a/2)<1?-t/2*(Math.sqrt(1-n*n)-1)+e:t/2*(Math.sqrt(1-(n-=2)*n)+1)+e}},Elastic:{easeIn:function(n,e,t,a,i,o){var r;return 0==n?e:1==(n/=a)?e+t:("undefined"==typeof o&&(o=.3*a),!i||i<Math.abs(t)?(r=o/4,i=t):r=o/(2*Math.PI)*Math.asin(t/i),-(i*Math.pow(2,10*(n-=1))*Math.sin(2*(n*a-r)*Math.PI/o))+e)},easeOut:function(n,e,t,a,i,o){var r;return 0==n?e:1==(n/=a)?e+t:("undefined"==typeof o&&(o=.3*a),!i||i<Math.abs(t)?(i=t,r=o/4):r=o/(2*Math.PI)*Math.asin(t/i),i*Math.pow(2,-10*n)*Math.sin(2*(n*a-r)*Math.PI/o)+t+e)},easeInOut:function(n,e,t,a,i,o){var r;return 0==n?e:2==(n/=a/2)?e+t:("undefined"==typeof o&&(o=.3*a*1.5),!i||i<Math.abs(t)?(i=t,r=o/4):r=o/(2*Math.PI)*Math.asin(t/i),1>n?-.5*i*Math.pow(2,10*(n-=1))*Math.sin(2*(n*a-r)*Math.PI/o)+e:i*Math.pow(2,-10*(n-=1))*Math.sin(2*(n*a-r)*Math.PI/o)*.5+t+e)}},Back:{easeIn:function(n,e,t,a,i){return"undefined"==typeof i&&(i=1.70158),t*(n/=a)*n*((i+1)*n-i)+e},easeOut:function(n,e,t,a,i){return"undefined"==typeof i&&(i=1.70158),t*((n=n/a-1)*n*((i+1)*n+i)+1)+e},easeInOut:function(n,e,t,a,i){return"undefined"==typeof i&&(i=1.70158),(n/=a/2)<1?t/2*n*n*(((i*=1.525)+1)*n-i)+e:t/2*((n-=2)*n*(((i*=1.525)+1)*n+i)+2)+e}},Bounce:{easeIn:function(n,e,t,a){return t-Tween.Bounce.easeOut(a-n,0,t,a)+e},easeOut:function(n,e,t,a){return(n/=a)<1/2.75?7.5625*t*n*n+e:2/2.75>n?t*(7.5625*(n-=1.5/2.75)*n+.75)+e:2.5/2.75>n?t*(7.5625*(n-=2.25/2.75)*n+.9375)+e:t*(7.5625*(n-=2.625/2.75)*n+.984375)+e},easeInOut:function(n,e,t,a){return a/2>n?.5*Tween.Bounce.easeIn(2*n,0,t,a)+e:.5*Tween.Bounce.easeOut(2*n-a,0,t,a)+.5*t+e}}};Math.tween=Tween;var progress=$(".loading-line"),g_loading=$("#g_loading"),progress_num=g_loading.find(".num"),loading_car=g_loading.find(".loading-car"),page_resources=["../img/mask.png","../img/shadow.png","../img/circleA.png","../img/circleB.png","../img/circleC.png","../img/city.jpg","../img/index-sbde0b052c5.png","../img/1-car.png","../img/car_list.png","../img/2-car.png","../img/3-car.png","../img/4-car.png","../img/1-man.png","../img/2-man.png","../img/3-man.png","../img/4-man.png","../img/1-sub.png","../img/2-sub.png","../img/3-sub.png","../img/4-sub.png","../img/1-wrap.png","../img/2-wrap.png","../img/3-wrap.png","../img/4-wrap.png"];setTimeout(function(){new mo.Loader(page_resources,{onLoading:function(n,e){var t=Math.ceil(100*n/e)+"%";progress_num.text(t),progress.css("width",t),loading_car.css("left",t)},onComplete:function(){setTimeout(function(){g_loading.remove(),initPage()},200)}})},3e3);var dataContainerOrientation=document.getElementById("dataContainerOrientation"),view=$(".view"),car_list=document.getElementById("car_list");window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",function(n){var e=(n.alpha,n.beta,n.gamma);if(null!=e&&view.hasClass("current")){var t=e-0+50;t=t>100?100:t,t=0>t?0:t,car_list.style.backgroundPosition=Math.floor(t)+"% 50%"}},!1);