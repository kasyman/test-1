function indexAnima(){var n,i,t,e,a,o,g;e=document.getElementById("city"),canvasCity1=document.getElementById("city1"),g=document.body.clientWidth,e.width=canvasCity1.width=g,e.height=canvasCity1.height=g,a=e.getContext("2d"),o=canvasCity1.getContext("2d"),n=new Image,n.onload=function(){i=new Image,i.onload=function(){t=new Image,t.onload=function(){function g(n,i){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var a=t.getContext("2d");a.translate(t.width/2,t.height/2),a.rotate(i*Math.PI/180),a.translate(t.width/-2,t.height/-2),a.drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height);var o=a.getImageData(0,0,t.width,t.height);return a.clearRect(0,0,t.width,t.height),o}function r(){if(d.hasClass("current")){a.globalCompositeOperation="source-over",-30==s?m=!0:30==s&&(m=!1),m?s++:s--,console.log(m+"--"+s);var l=g(i,s);a.putImageData(l,0,0),a.globalCompositeOperation="source-in",a.drawImage(n,0,0,n.width,n.height,0,0,e.width,e.height),o.globalCompositeOperation="source-over",30==c?m=!0:-30==c&&(m=!1),m?c--:c++;var l=g(t,c);o.putImageData(l,0,0),o.globalCompositeOperation="source-in",o.drawImage(n,0,0,n.width,n.height,0,0,canvasCity1.width,canvasCity1.height)}requestAnimationFrame(r)}var s=-30,c=30,d=$(".index"),m=!0;requestAnimationFrame(r)},t.src="../img/mask_inner.png"},i.src="../img/mask_out.png"},n.src="../img/city.jpg"}function initPage(){function n(){o=-1==o?2:o,o=3==o?0:o,t.find(".model-wrap").eq(o).addClass("show").siblings().removeClass("show"),t.find(".model-wrap").removeClass("show-con")}var i=new mo.PageSlide({target:$("#slide li")});i.on("change",function(){$("#slide li").eq(this.curPage).addClass("anima").siblings().removeClass("anima")}),$(".view .btn").bind("touchstart",function(){i.next()}),$(".index").addClass("anima"),setTimeout(function(){indexAnima()},800);var t=$(".model-show-page"),e=t.find(".car_arrow_left"),a=t.find(".car_arrow_right"),o=0;e.bind("touchstart",function(){o--,n()}),a.bind("touchstart",function(){o++,n()}),t.find(".add-icon").bind("touchstart",function(){$(this).parent().hasClass("show-con")?$(this).parent().removeClass("show-con"):$(this).parent().addClass("show-con").siblings().removeClass("show-con")})}var progress=$(".loading-line"),g_loading=$("#g_loading"),progress_num=g_loading.find(".num"),loading_car=g_loading.find(".loading-car"),page_resources=["../img/mask.png","../img/shadow.png","../img/circleA.png","../img/circleB.png","../img/circleC.png","../img/city.jpg","../img/index-sbde0b052c5.png","../img/1-car.png","../img/car_list.png","../img/2-car.png","../img/3-car.png","../img/4-car.png","../img/1-man.png","../img/2-man.png","../img/3-man.png","../img/4-man.png","../img/1-sub.png","../img/2-sub.png","../img/3-sub.png","../img/4-sub.png","../img/1-wrap.png","../img/2-wrap.png","../img/3-wrap.png","../img/4-wrap.png"];setTimeout(function(){new mo.Loader(page_resources,{onLoading:function(n,i){var t=Math.ceil(100*n/i)+"%";progress_num.text(t),progress.css("width",t),loading_car.css("left",t)},onComplete:function(){setTimeout(function(){g_loading.remove(),initPage()},200)}})},3e3);var dataContainerOrientation=document.getElementById("dataContainerOrientation"),view=$(".view"),car_list=document.getElementById("car_list");window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",function(n){var i=(n.alpha,n.beta,n.gamma);if(null!=i&&view.hasClass("current")){var t=i-0+50;t=t>100?100:t,t=0>t?0:t,car_list.style.backgroundPosition=Math.floor(t)+"% 50%"}},!1);