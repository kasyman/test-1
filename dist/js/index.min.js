function indexAnima(){var i,n,t,a,e,o,g;a=document.getElementById("city"),canvasCity1=document.getElementById("city1"),g=document.body.clientWidth,a.width=canvasCity1.width=g,a.height=canvasCity1.height=g,e=a.getContext("2d"),o=canvasCity1.getContext("2d"),i=new Image,i.onload=function(){n=new Image,n.onload=function(){t=new Image,t.onload=function(){function g(i,n){var t=document.createElement("canvas");t.width=a.width,t.height=a.height;var e=t.getContext("2d");e.translate(t.width/2,t.height/2),e.rotate(n*Math.PI/180),e.translate(t.width/-2,t.height/-2),e.drawImage(i,0,0,i.width,i.height,0,0,t.width,t.height);var o=e.getImageData(0,0,t.width,t.height);return e.clearRect(0,0,t.width,t.height),o}function r(){if(d.hasClass("current")){e.globalCompositeOperation="source-over",s++;var m=g(n,s++);e.putImageData(m,0,0),e.globalCompositeOperation="source-in",e.drawImage(i,0,0,i.width,i.height,0,0,a.width,a.height),o.globalCompositeOperation="source-over",c--;var m=g(t,c--);o.putImageData(m,0,0),o.globalCompositeOperation="source-in",o.drawImage(i,0,0,i.width,i.height,0,0,canvasCity1.width,canvasCity1.height)}requestAnimationFrame(r)}var s=0,c=90,d=$(".index");requestAnimationFrame(r)},t.src="../img/mask_inner.png"},n.src="../img/mask_out.png"},i.src="../img/city.jpg"}function initPage(){function i(){o=-1==o?2:o,o=3==o?0:o,t.find(".model-wrap").eq(o).addClass("show").siblings().removeClass("show"),t.find(".model-wrap").removeClass("show-con")}var n=new mo.PageSlide({target:$("#slide li")});n.on("change",function(){$("#slide li").eq(this.curPage).addClass("anima").siblings().removeClass("anima")}),$(".g_arrow,.view .btn").bind("touchstart",function(){n.next()}),$(".index").addClass("anima"),setTimeout(function(){indexAnima()},800);var t=$(".model-show-page"),a=t.find(".car_arrow_left"),e=t.find(".car_arrow_right"),o=0;a.bind("touchstart",function(){o--,i()}),e.bind("touchstart",function(){o++,i()}),t.find(".add-icon").bind("touchstart",function(){$(this).parent().hasClass("show-con")?$(this).parent().removeClass("show-con"):$(this).parent().addClass("show-con").siblings().removeClass("show-con")})}var progress=$(".loading-line"),g_loading=$("#g_loading"),progress_num=g_loading.find(".num"),loading_car=g_loading.find(".loading-car"),page_resources=["../img/mask.png","../img/shadow.png","../img/circleA.png","../img/circleB.png","../img/circleC.png","../img/city.jpg","../img/index-sbde0b052c5.png","../img/1-car.png","../img/car_list.png","../img/2-car.png","../img/3-car.png","../img/4-car.png","../img/1-man.png","../img/2-man.png","../img/3-man.png","../img/4-man.png","../img/1-sub.png","../img/2-sub.png","../img/3-sub.png","../img/4-sub.png","../img/1-wrap.png","../img/2-wrap.png","../img/3-wrap.png","../img/4-wrap.png"];setTimeout(function(){new mo.Loader(page_resources,{onLoading:function(i,n){var t=Math.ceil(100*i/n)+"%";progress_num.text(t),progress.css("width",t),loading_car.css("left",t)},onComplete:function(){setTimeout(function(){g_loading.remove(),initPage()},200)}})},3e3);var dataContainerOrientation=document.getElementById("dataContainerOrientation"),view=$(".view"),car_list=document.getElementById("car_list");window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",function(i){var n=(i.alpha,i.beta,i.gamma);if(null!=n&&view.hasClass("current")){var t=n-0+50;t=t>100?100:t,t=0>t?0:t,car_list.style.backgroundPosition=t+"% 50%"}},!1);